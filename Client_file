import java.io.*; 
import java.net.*; 
public class ClientFile { 
    public static void main(String[] args) { 
        try (Socket socket = new Socket("10.77.10.97", 1234)) { 
            DataInputStream dis = new DataInputStream(socket.getInputStream()); 
            int fileSize = dis.readInt(); 
            byte[] receivedBytes = new byte[fileSize]; 
            dis.readFully(receivedBytes); 
            FileOutputStream fos = new FileOutputStream("received_from_server.txt"); 
            fos.write(receivedBytes); 
            fos.close(); 
            System.out.println("Received file from server and saved as 
received_from_server.txt"); 
            File fileToSend = new File("clientfile.txt"); 
            byte[] fileBytes = new byte[(int) fileToSend.length()]; 
            BufferedInputStream bis = new BufferedInputStream(new 
FileInputStream(fileToSend)); 
            bis.read(fileBytes, 0, fileBytes.length); 
 
            DataOutputStream dos = new DataOutputStream(socket.getOutputStream()); 
            dos.writeInt(fileBytes.length); // send size 
            dos.write(fileBytes);          // send data 
            dos.flush(); 
            bis.close(); 
            System.out.println("Sent file to server."); 
            socket.close(); 
        } catch (IOException e) { 
            e.printStackTrace(); 
        } 
    } 
}
